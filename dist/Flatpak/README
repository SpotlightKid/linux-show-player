------ INTRO ------

(╯°□°）╯︵ ┻━┻

The scripts/files in this folder allow to build a Flatpak bundle of
Linux Show Player using Travis-CI, in LiSP case, the build is run in a custom
docker image, the travis VM or containers (Ubuntu 12.04 or 14.04) don't have
support for flatpak.

- build.sh: this bash script invoke the needed flatpak commands to build the
            application from a manifest file.

- functions.sh: include some handy logging for travis

- pipenv_flatpak.py: starting from the project Pipfile.lock generate the
                     appropriate modules to install the python requirements

- template.json: the base manifest file, contains all the metadata, and the
                 non-python packages (some exception here)

- travis_flatpak.py: starting from "template.json" outputs the complete manifest


------ DETAILS ------

- some parts are hardcoded, because I'm lazy and this scripts are designed with
  LiSP in mind

- CPython is already present in the runtime, but we prefer a newer version,
  so we include a custom one.
  This version is build on a different Travis-CI repository and downloaded
  from bintray, to optimize the building process

- non-used features of the various packages should be disabled when possible

- gstreamer-plugins-good is already included in the base runtime, but with some
  needed feature disabled, so we re-built it

- the python "protobuf" package is specified directly in the template, this for
  a few reasons:
  - It's needed to "build" the OLA python package, which, can only be build
    with all the OLA framework (--enable-python-libs)
  - It's not specified in the Pipfile, for the reason above, without a complete
    OLA installation you cannot have the python package

- protobuf requires "six" and "setuptools", we install the only first, we
  consider the second already shipped with the cpython packages

- for python we favor pre-build "wheel" releases, which are faster to install

- the PyQt5 package from PyPi already bundle the correct Qt5 binaries


------ NOTES ------

- until OLA 0.11 we must use protobuf < 3.2, or it will not build,
  if needed we may patch it, for now it's fine

- pipenv_flatpak.py is quite generic, it could also be used in other places

- The PyQt5 wheels from pypi are "all-inclusive" and quite big

- If we need custom build for "pyqt5" and "sip" the best approach is probably to
  create an ad-hoc repository to produce a wheel file like the ones distributed
  from pypi
